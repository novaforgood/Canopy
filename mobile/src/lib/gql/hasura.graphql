query User($id: String!) {
  user_by_pk(id: $id) {
    id
    email
    first_name
    last_name
  }
}

query SpaceBySlug($slug: String!) {
  space(where: { slug: { _eq: $slug } }) {
    id
    name
    description_html
    slug
    owner_id
    attributes
    space_listing_questions(
      order_by: { listing_order: asc }
      where: { deleted: { _eq: false } }
    ) {
      char_count
      id
      space_id
      title
      listing_order
      deleted
    }
    space_tag_categories(
      order_by: { listing_order: asc }
      where: { deleted: { _eq: false } }
    ) {
      id
      title
      deleted
      space_id
      listing_order
      rigid_select
      space_tags(order_by: { listing_order: asc }) {
        id
        label
        listing_order
        status
      }
    }
    space_cover_image {
      id
      image {
        id
        url
      }
    }
  }
}

query AllProfilesOfUser($user_id: String!) {
  profile(where: { user_id: { _eq: $user_id } }) {
    id
    profile_roles {
      id
      profile_role
    }
    profile_listing {
      id
      public
      headline
      profile_listing_image {
        id
        image {
          id
          url
        }
      }
      profile_listing_to_space_tags(
        where: { space_tag: { status: { _neq: Deleted } } }
      ) {
        id
        space_tag_id
        space_tag {
          id
          space_tag_category_id
          label
        }
      }
    }

    flattened_profile_roles {
      id
      profile_id
      profile_role
    }
    space {
      id
      name
      slug
      space_cover_image {
        id
        image {
          id
          url
        }
      }
    }
    user {
      id
      email
      first_name
      last_name
    }
  }
}

query ProfileListingsInSpace($where: profile_listing_bool_exp) {
  profile_listing(where: $where) {
    id
    public
    headline
    profile_listing_image {
      id
      image {
        id
        url
      }
    }
    profile_listing_to_space_tags(
      where: { space_tag: { status: { _neq: Deleted } } }
    ) {
      id
      space_tag_id
      space_tag {
        id
        label
      }
    }
    profile {
      id
      user {
        id
        last_name
        first_name
        email
      }
    }
  }
}

query ProfileById($profile_id: uuid!, $is_logged_in: Boolean!) {
  profile_by_pk(id: $profile_id) {
    id
    created_at
    profile_listing {
      id
      public
      headline
      profile_listing_image {
        id
        image {
          id
          url
        }
      }
      profile_listing_socials {
        id
        link
        type
      }
      profile_listing_responses(
        order_by: { space_listing_question: { listing_order: asc } }
        where: { space_listing_question: { deleted: { _eq: false } } }
      ) {
        id
        response_html
        space_listing_question {
          id
          title
        }
      }
      profile_listing_to_space_tags(
        where: { space_tag: { status: { _neq: Deleted } } }
      ) {
        id
        space_tag_id
        space_tag {
          id
          label
        }
      }
    }
    user {
      id
      first_name
      last_name
      email
    }
    profile_roles {
      id
      profile_role
    }
  }
  profile_to_chat_room(
    where: {
      chat_room: { profile_to_chat_rooms: { profile_id: { _eq: $profile_id } } }
    }
  ) @include(if: $is_logged_in) {
    id
    chat_room_id
  }
}
