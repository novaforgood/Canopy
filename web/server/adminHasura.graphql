query GetInviteLink($invite_link_id: uuid!) {
  space_invite_link_by_pk(id: $invite_link_id) {
    id
    expires_at
    created_at
    space_id
    type
  }
}

mutation UpsertUser(
  $id: String!
  $email: String!
  $first_name: String!
  $last_name: String!
) {
  insert_user_one(
    object: {
      id: $id
      email: $email
      first_name: $first_name
      last_name: $last_name
    }
    on_conflict: {
      constraint: users_pkey
      update_columns: [email, first_name, last_name]
    }
  ) {
    email
    id
    first_name
    last_name
  }
}

mutation InsertProfile($data: profile_insert_input!) {
  insert_profile_one(object: $data) {
    id
    user_id
    space_id
  }
}

mutation InsertImage($data: image_insert_input!) {
  insert_image_one(object: $data) {
    id
    url
  }
}

query GetProfile($profile_id: uuid!) {
  profile_by_pk(id: $profile_id) {
    id
    user {
      id
      first_name
      last_name
      email
    }
  }
}

mutation InsertConnectionRequest($data: connection_request_insert_input!) {
  insert_connection_request_one(object: $data) {
    id
    sender_profile_id
    receiver_profile_id
    created_at
    confirmed_at
    confirmed
  }
}
