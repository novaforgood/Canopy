# Dump uncategorized queries here

query User($id: String!) {
  user_by_pk(id: $id) {
    id
    email
    first_name
    last_name
  }
}

query AllProfilesOfUser($user_id: String!) {
  profile(where: { user_id: { _eq: $user_id } }) {
    id
    profile_roles {
      id
      profile_role
    }
    profile_listing {
      id
      public
      profile_listing_image {
        id
        image {
          id
          url
        }
      }
    }
    flattened_profile_roles {
      id
      profile_id
      profile_role
    }
    space {
      id
      name
      slug
    }
    user {
      id
      email
      first_name
      last_name
    }
  }
}

query SpaceBySlug($slug: String!) {
  space(where: { slug: { _eq: $slug } }) {
    id
    name
    slug
    owner_id
    space_listing_questions(order_by: { listing_order: asc }) {
      char_count
      id
      space_id
      title
      listing_order
    }
  }
}

mutation CreateOwnerProfileInNewSpace(
  $user_id: String!
  $space: space_insert_input!
) {
  insert_profile_one(
    object: {
      space: { data: $space }
      profile_roles: { data: { profile_role: Admin } }
      user_id: $user_id
    }
  ) {
    id
    space_id
    user_id
    space {
      id
      name
      slug
      owner_id
      space_listing_questions {
        char_count
        id
        space_id
        title
      }
    }
  }
}

query InviteLinks($space_id: uuid!) {
  space_invite_link(where: { space_id: { _eq: $space_id } }) {
    id
    expires_at
    created_at
    space_id
    type
  }
}

mutation CreateInviteLink(
  $space_id: uuid!
  $type: space_invite_link_type_enum!
  $expires_at: timestamptz!
) {
  insert_space_invite_link_one(
    object: { space_id: $space_id, type: $type, expires_at: $expires_at }
  ) {
    id
    expires_at
    created_at
    space_id
    type
  }
}

query ProfilesBySpaceId($space_id: uuid!) {
  profile(where: { space_id: { _eq: $space_id } }) {
    id
    user {
      id
      first_name
      last_name
      email
    }
    profile_roles {
      id
      profile_role
    }
    space_id
    user_id
    created_at
  }
}

query SpaceTagCategories($space_id: uuid!) {
  space_tag_category(where: { space_id: { _eq: $space_id } }) {
    space_tags {
      id
      label
    }
    title
    id
  }
}

query ProfileListingToSpaceTag($profile_id: uuid!) {
  profile_listing_to_space_tag(
    where: { profile_listing: { profile_id: { _eq: $profile_id } } }
  ) {
    id
    profile_listing_id
    space_tag_id
    space_tag {
      id
      label
      space_tag_category_id
    }
  }
}

query SpaceTags($space_tag_category_id: uuid!) {
  space_tag(where: { space_tag_category_id: {} }) {
    id
    space_tag_category {
      space_id
      title
    }
  }
}

query ProfileListingsInSpace($space_id: uuid!) {
  profile_listing(where: { profile: { space_id: { _eq: $space_id } } }) {
    id
    profile_listing_image {
      id
      image {
        id
        url
      }
    }
    profile {
      id
      user {
        id
        last_name
        first_name
        email
      }
    }
  }
}

query ProfileById($profile_id: uuid!) {
  profile_by_pk(id: $profile_id) {
    created_at
    profile_listing {
      id
      profile_listing_image {
        id
        image {
          id
          url
        }
      }
      profile_listing_socials {
        id
        link
        type
      }
      profile_listing_responses {
        id
        response_html
        space_listing_question {
          id
          title
        }
      }
      public
    }
    user {
      id
      first_name
      last_name
      email
    }
    profile_roles {
      id
      profile_role
    }
  }
}

mutation UpdateProfileRole($profile_role: profile_role_enum!, $row_id: uuid!) {
  update_profile_to_profile_role_by_pk(
    pk_columns: { id: $row_id }
    _set: { profile_role: $profile_role }
  ) {
    profile_role
    id
    profile_id
  }
}
