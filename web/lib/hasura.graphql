query User($id: String!) {
  users_by_pk(id: $id) {
    id
    email
  }
}

query AllProfilesOfUser($user_id: String!) {
  profiles(where: { user_id: { _eq: $user_id } }) {
    id
    listing_enabled
    roles {
      profile_role
    }
    space {
      id
      name
      slug
    }
  }
}

query SpaceBySlug($slug: String!) {
  spaces(where: { slug: { _eq: $slug } }) {
    id
    name
    slug
  }
}

mutation CreateOwnerProfileInNewSpace(
  $user_id: String!
  $space: spaces_insert_input!
  $profile_listing_enabled: Boolean!
) {
  insert_profiles_one(
    object: {
      space: { data: $space }
      roles: { data: { profile_role: Admin } }
      user_id: $user_id
      listing_enabled: $profile_listing_enabled
    }
  ) {
    id
    space_id
    space {
      id
      name
      slug
      owner_id
    }
    user_id
  }
}

query InviteLinks($space_id: uuid!) {
  space_invite_links(where: { space_id: { _eq: $space_id } }) {
    id
    expires_at
    created_at
    space_id
    type
  }
}

mutation CreateInviteLink(
  $space_id: uuid!
  $type: space_invite_link_types_enum!
  $expires_at: timestamptz!
) {
  insert_space_invite_links_one(
    object: { space_id: $space_id, type: $type, expires_at: $expires_at }
  ) {
    id
    expires_at
    created_at
    space_id
    type
  }
}

query ProfilesBySpaceId($space_id: uuid!) {
  profiles(where: { space_id: { _eq: $space_id } }) {
    id
    user {
      first_name
      last_name
      email
    }
    roles {
      profile_role
    }
    listing_enabled
    space_id
    user_id
    created_at
  }
}
